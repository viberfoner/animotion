(()=>{"use strict";function t(t){return t&&"object"==typeof t&&!Array.isArray(t)}function e(i,...n){if(!n.length)return i;const r=n.shift();if(t(i)&&t(r)){for(const n in r)t(r[n])?(i[n]||Object.assign(i,{[n]:{}}),e(i[n],r[n])):Object.assign(i,{[n]:r[n]});return e(i,...n)}}const i={arc:{required:["x","y","w","h","start","stop"],optional:["mode","detail"]},ellipse:{required:["x","y","w"],optional:["h"]},circle:{required:["x","y","d"]},line:{required:["x1","y1","x2","y2"]},point:{required:["x","y"],optional:["z"]},quad:{required:["x1","y1","x2","y2","x3","y3","x4","y4"],optional:["detailX","detailY"]},rect:{required:["x","y","w"],optional:["h","tl","tr","br","bl"]},square:{required:["x","y","s"],optional:["tl","tr","br","bl"]},triangle:{required:["x1","y1","x2","y2","x3","y3"]}};function n(t,e){return t<.5?Math.pow(2,e-1)*Math.pow(t,e):1-Math.pow(2,e-1)*Math.pow(1-t,e)}function r(t){return t*t}function s(t){return 1-(1-t)*(1-t)}p5.prototype.createAnim=function(t=!0){return new p5.Anim(this,t)},p5.prototype.copyColor=function(t){if(!t instanceof p5.Color)throw new Error("p5.copyColor must take an instance of p5.color as its only argument");return new p5.Color(this,t.toString())},p5.Anim=function(t,e=!0){this.p=t,this.scene=[],this.loop=e,this.length=0,this.frame=0},p5.Anim.prototype.addObj=function(t,...n){const r=i[t];let s=[...r.required];r.optional&&(s=[...s,...r.optional]);const o={};for(let t=0;t<n.length;t++)"object"==typeof n[t]?e(o,n[t]):o[s[t]]=n[t];const h=new p5.Anim.Obj(this.p,t,o,this);return this.scene.push(h),this.updateLength(h),h},p5.Anim.prototype.updateLength=function(t){const e=t.keyFrames.at(-1).frame;this.length<e&&(this.length=e)},p5.Anim.prototype.update=function(){this.frame++,this.loop&&this.frame>=this.length&&this.reset();for(const t of this.scene)t.update(this.frame)},p5.Anim.prototype.render=function(){this.p.push();for(const t of this.scene)t.render();this.p.pop()},p5.Anim.prototype.reset=function(){this.frame=0;for(const t of this.scene)t.reset()};const o={linear:function(t){return t},smoothStep:function(t){return function(t,e,i){return(e-t)*i+t}(r(t),s(t),t)},easeInQuad:r,easeOutQuad:s,easeInOutQuad:function(t){return n(t,2)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){const e=1-t;return 1-e*e*e},easeInOutCubic:function(t){return n(t,3)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){const e=1-t;return 1-e*e*e*e},easeInOutQuart:function(t){return n(t,4)},easeInOutQuint:function(t){return n(t,5)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){const e=1-t;return 1-e*e*e*e*e}};p5.Anim.Obj=function(t,i,n,r){this.p=t,this.prim=i,this.anim=r,this._init=n,this._temp={},e(this,n),this.keyFrames=[{frame:0}],this._current=0},Object.defineProperties(p5.Anim.Obj.prototype,{current:{get:function(){return this.keyFrames[this._current]}},next:{get:function(){return this.keyFrames[this._current+1]}}}),p5.Anim.Obj.prototype.addKeyFrame=function(t,e,i="easeInOutCubic"){const n=this.keyFrames.at(-1).frame+t;return this.keyFrames.push({frame:n,targetProps:e,easingFn:i}),this.anim.updateLength(this),this},p5.Anim.Obj.prototype.addKeyFrames=function(t,e="easeInOutCubic"){for(let i in t)i=parseInt(i),this.keyFrames.push({frame:i,targetProps:t[i],easingFn:e}),this.anim.updateLength(this);return this},p5.Anim.Obj.prototype.updateKeyFrame=function(t){this.next&&t>=this.next.frame&&this._current<this.keyFrames.length-1&&this._current++},p5.Anim.Obj.prototype.setFill=function(){return arguments[0]instanceof p5.Color?(this.fill=arguments[0],this._init.fill||(this._init.fill=this.p.color(arguments[0].toString())),this):(this.fill=this.p.color(...arguments),this._init.fill||(this._init.fill=this.p.color(...arguments)),this)},p5.Anim.Obj.prototype.setStroke=function(){return arguments[0]instanceof p5.Color?(this.stroke=arguments[0],this._init.stroke||(this._init.stroke=this.p.color(arguments[0].toString())),this):(this.stroke=this.p.color(...arguments),this._init.stroke||(this._init.stroke=this.p.color(...arguments)),this)},p5.Anim.Obj.prototype.setStrokeWeight=function(t){return this.strokeWeight=t,this},p5.Anim.Obj.prototype.update=function(t){if(this.updateKeyFrame(t),!this.next||!this.next.targetProps)return;const e=this.next.targetProps,i=this.next.frame-this.current.frame,n=("function"==typeof this.next.easingFn?this.next.easingFn:o[this.next.easingFn])((t-this.current.frame)/i);for(let i in e)if(t!==this.current.frame&&1!==t||(this._temp[i]="fill"===i||"stroke"===i?this.p.color(this[i].toString()):this[i]),"fill"!==i&&"stroke"!==i)this[i]=this.p.lerp(this._temp[i],this.next.targetProps[i],n);else{const t=this.p.color(e[i]);this[i]=this.p.lerpColor(this._temp[i],t,n)}},p5.Anim.Obj.prototype.renderFn=function(){const t=i[this.prim];let e=[];for(const i of t.required)e.push(this[i]);if(t.optional)for(const i of t.optional)this[i]&&e.push(this[i]);this.p[this.prim](...e)},p5.Anim.Obj.prototype.render=function(){this.fill&&this.p.fill(this.fill),this.stroke&&this.p.stroke(this.stroke),this.strokeWeight&&this.p.strokeWeight(this.strokeWeight),this.renderFn()},p5.Anim.Obj.prototype.reset=function(){e(this,this.defaults),e(this,this._init),this._current=0}})();